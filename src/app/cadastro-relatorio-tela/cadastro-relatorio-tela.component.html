<app-layout-formater>
  <div left-content>
    <app-dynamic-title></app-dynamic-title>
    <!-- Itera sobre os componentes dinâmicos -->
    <div>
      <!-- Loop correto para gerar os componentes dinâmicos -->
      <app-dynamic-container
        *ngFor="let item of data"
        [id]="item.id"
        [componentType]="item.tipoComponente"
        [value]="item.data"
        (onValueChange)="onValueChange($event)">
      </app-dynamic-container>
    </div>
    <!-- Botão Salvar fora do loop -->
    <button (click)="salvarEstado()">Salvar</button>

    <!-- Itera sobre os itens de colapso -->
    <app-collapse-cadastro-itens *ngFor="let item of items" [icon]="'double-right'" [title]="'teste'" [active]="true">
      <button nz-button class="mt-2" nzType="primary" (click)="deleteItem(item.id)">Deletar</button>
    </app-collapse-cadastro-itens>

    <!-- Botão para adicionar item -->
    <div class="d-flex col-12 ml-5">
      <button class="border-0 mt-3 p-3 col-12 rounded-5 button-new fw-bold  rg-brown rg-background-yellow"  nz-icon nzType="plus-circle" (click)="showModal()" nzShape="round">Novo Item </button>

    </div>

    <nz-modal [(nzVisible)]="isVisible" nzTitle="Selecionar Componente" (nzOnCancel)="handleCancel()"
              (nzOnOk)="handleOk()">
      <ng-container *nzModalContent>
        <ng-container *ngFor="let componentData of componentsList">
          <app-dynamic-card
            [title]="componentData.nome"
            [cardIcon]="'dot-chart'"
            (click)="addComponent(componentData.tipoComponente)">
          </app-dynamic-card>
        </ng-container>
      </ng-container>
    </nz-modal>
  </div>

  <!-- Área de pré-visualização e botão de geração de PDF -->
  <div right-content>
    <div class="preview-area">
      <button class="mb-4" (click)="generatePDF()">Gerar PDF</button>
      <app-dynamic-pagination></app-dynamic-pagination>
      {{ previewContent }}
    </div>
    <div [innerHTML]="previewContent"></div>
  </div>


</app-layout-formater>
